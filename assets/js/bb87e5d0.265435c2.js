"use strict";(self.webpackChunktalon_wiki=self.webpackChunktalon_wiki||[]).push([[3710],{7381:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>t,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Resource Hub/Talon Installation/nix","title":"Using Talon with Nix","description":"Talon can be installed using the Nix package manager by using the nix-community/talon-nix flake. It can be installed either as a system package or home manager package.","source":"@site/docs/Resource Hub/Talon Installation/nix.md","sourceDirName":"Resource Hub/Talon Installation","slug":"/Resource Hub/Talon Installation/nix","permalink":"/Resource Hub/Talon Installation/nix","draft":false,"unlisted":false,"editUrl":"https://github.com/TalonCommunity/Wiki/edit/main/docs/Resource Hub/Talon Installation/nix.md","tags":[],"version":"current","frontMatter":{},"sidebar":"ResourceHubSidebar","previous":{"title":"Downloading the Talon Community User File Set","permalink":"/Resource Hub/Talon Installation/downloading-community"}}');var a=n(4848),l=n(8453);const r={},o="Using Talon with Nix",t={},c=[{value:"Installation Instructions",id:"installation-instructions",level:2},{value:"Flake-based Installation",id:"flake-based-installation",level:3},{value:"Non-Flake-Based Installation",id:"non-flake-based-installation",level:3},{value:"Nix with the Community VSCode Command Server",id:"nix-with-the-community-vscode-command-server",level:2}];function h(s){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",span:"span",strong:"strong",...(0,l.R)(),...s.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"using-talon-with-nix",children:"Using Talon with Nix"})}),"\n",(0,a.jsxs)(e.p,{children:["Talon can be installed using the Nix package manager by using the ",(0,a.jsx)(e.a,{href:"https://github.com/nix-community/talon-nix",children:"nix-community/talon-nix"})," flake. It can be installed either as a system package or home manager package."]}),"\n",(0,a.jsxs)(e.p,{children:["Because Talon is closed source, your system will need to be configured to accept ",(0,a.jsx)(e.a,{href:"https://wiki.nixos.org/wiki/Unfree_software",children:"unfree packages"}),"."]}),"\n",(0,a.jsx)(e.admonition,{type:"warning",children:(0,a.jsxs)(e.p,{children:["This flake is not an official Talon package, but rather community-supported. If it is not working, please file an issue ",(0,a.jsx)(e.strong,{children:"upstream"})," to the flake, not Talon. If you have issues you can ask for help on the #talon-nixos channel on the official Slack server."]})}),"\n",(0,a.jsxs)(e.p,{children:["There is an ",(0,a.jsx)(e.a,{href:"https://github.com/nix-community/talon-nix/blob/master/README.md#faq",children:"FAQ"})," in the talon-nix repo that you may also be interested in reading."]}),"\n",(0,a.jsx)(e.h2,{id:"installation-instructions",children:"Installation Instructions"}),"\n",(0,a.jsxs)(e.p,{children:["There are a few ways you can install Talon with Nix, depending on your setup. The best approach is to import the talon-nix module and then enable it using the ",(0,a.jsx)(e.code,{children:"programs.talon"})," option. This will ensure that the necessary udev packages are installed, which will allow you to use a Tobii eye tracker."]}),"\n",(0,a.jsx)(e.h3,{id:"flake-based-installation",children:"Flake-based Installation"}),"\n",(0,a.jsx)(e.p,{children:"You will need to introduce the flake into your configuration. If you are using a flake-based configuration, you can add an input:"}),"\n",(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(e.pre,{className:"shiki shiki-themes catppuccin-latte catppuccin-macchiato",style:{backgroundColor:"#eff1f5","--shiki-dark-bg":"#24273a",color:"#4c4f69","--shiki-dark":"#cad3f5"},tabIndex:"0",children:(0,a.jsxs)(e.code,{children:[(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"    inputs = "}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"{"})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#1E66F5","--shiki-dark":"#8AADF4"},children:"        talon-nix"}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#1E66F5","--shiki-dark":"#8AADF4"},children:"url"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:" ="}),(0,a.jsx)(e.span,{style:{color:"#40A02B","--shiki-dark":"#A6DA95"},children:' "github:nix-community/talon-nix"'}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:";"})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"    }"}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:";"})]})]})})}),"\n",(0,a.jsx)(e.p,{children:"You can then import the module somewhere in your configuration and enable it:"}),"\n",(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(e.pre,{className:"shiki shiki-themes catppuccin-latte catppuccin-macchiato",style:{backgroundColor:"#eff1f5","--shiki-dark-bg":"#24273a",color:"#4c4f69","--shiki-dark":"#cad3f5"},tabIndex:"0",children:(0,a.jsxs)(e.code,{children:[(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"    imports = "}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"["})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"        inputs"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"talon-nix"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"nixosModules"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"talon"})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"    ]"}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:";"})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"    programs"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"talon"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"enable = "}),(0,a.jsx)(e.span,{style:{color:"#D20F39","--shiki-dark":"#ED8796"},children:"true"}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:";"})]})]})})}),"\n",(0,a.jsxs)(e.p,{children:["If you're using home-manager, you can't use ",(0,a.jsx)(e.code,{children:"programs.talon.enable"}),", so will have to manually add the package to ",(0,a.jsx)(e.code,{children:"home.pkgs"}),". This could be done by adding a nixpkgs overlay or just referencing the package directly (though the latter you may run into issues due to unfree)."]}),"\n",(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(e.pre,{className:"shiki shiki-themes catppuccin-latte catppuccin-macchiato",style:{backgroundColor:"#eff1f5","--shiki-dark-bg":"#24273a",color:"#4c4f69","--shiki-dark":"#cad3f5"},tabIndex:"0",children:(0,a.jsxs)(e.code,{children:[(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"home"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"packages = "}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"["})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"    talon-nix"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"packages"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"${"}),(0,a.jsx)(e.span,{style:{color:"#D20F39","--shiki-dark":"#ED8796"},children:"builtins"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#7287FD","--shiki-dark":"#B7BDF8"},children:"currentSystem"}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"}"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"default"})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"]"}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:";"})]})]})})}),"\n",(0,a.jsx)(e.h3,{id:"non-flake-based-installation",children:"Non-Flake-Based Installation"}),"\n",(0,a.jsxs)(e.p,{children:["If you are using a non-flake-based configuration, you will need to bring the talon-nix flake into your configuration, which you can do using the ",(0,a.jsx)(e.a,{href:"https://noogle.dev/f/builtins/getFlake",children:(0,a.jsx)(e.code,{children:"builtins.getFlake"})})," function. You can then import the module and enable the program:"]}),"\n",(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(e.pre,{className:"shiki shiki-themes catppuccin-latte catppuccin-macchiato",style:{backgroundColor:"#eff1f5","--shiki-dark-bg":"#24273a",color:"#4c4f69","--shiki-dark":"#cad3f5"},tabIndex:"0",children:(0,a.jsxs)(e.code,{children:[(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"    imports = "}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"["})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"        ("}),(0,a.jsx)(e.span,{style:{color:"#D20F39","--shiki-dark":"#ED8796"},children:"builtins"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"getFlake "}),(0,a.jsx)(e.span,{style:{color:"#40A02B","--shiki-dark":"#A6DA95"},children:'"github:nix-community/talon-nix"'}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:")"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"nixosModules"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"talon"})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"    ]"}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:";"})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"    programs"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"talon"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"enable = "}),(0,a.jsx)(e.span,{style:{color:"#D20F39","--shiki-dark":"#ED8796"},children:"true"}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:";"})]})]})})}),"\n",(0,a.jsxs)(e.p,{children:["If for whatever reason you don't want to use the ",(0,a.jsx)(e.code,{children:"programs.talon.enable = true"})," method you could also add the package as a nixpkgs overlay, or access it directly from your ",(0,a.jsx)(e.code,{children:"environment.systemPackages"})," or ",(0,a.jsx)(e.code,{children:"home.packages"})," arrays (though this may result in unfree-related issues)"]}),"\n",(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(e.pre,{className:"shiki shiki-themes catppuccin-latte catppuccin-macchiato",style:{backgroundColor:"#eff1f5","--shiki-dark-bg":"#24273a",color:"#4c4f69","--shiki-dark":"#cad3f5"},tabIndex:"0",children:(0,a.jsxs)(e.code,{children:[(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"  environment"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"systemPackages = with pkgs; "}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"["})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"    ("}),(0,a.jsx)(e.span,{style:{color:"#D20F39","--shiki-dark":"#ED8796"},children:"builtins"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"getFlake "}),(0,a.jsx)(e.span,{style:{color:"#40A02B","--shiki-dark":"#A6DA95"},children:'"github:nix-community/talon-nix"'}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:")"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"packages"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"${"}),(0,a.jsx)(e.span,{style:{color:"#D20F39","--shiki-dark":"#ED8796"},children:"builtins"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#7287FD","--shiki-dark":"#B7BDF8"},children:"currentSystem"}),(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"}"}),(0,a.jsx)(e.span,{style:{color:"#179299","--shiki-dark":"#8BD5CA"},children:"."}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:"default"})]}),"\n",(0,a.jsxs)(e.span,{className:"line",children:[(0,a.jsx)(e.span,{style:{color:"#7C7F93","--shiki-dark":"#939AB7"},children:"  ]"}),(0,a.jsx)(e.span,{style:{color:"#4C4F69","--shiki-dark":"#CAD3F5"},children:";"})]})]})})}),"\n",(0,a.jsx)(e.h2,{id:"nix-with-the-community-vscode-command-server",children:"Nix with the Community VSCode Command Server"}),"\n",(0,a.jsxs)(e.p,{children:["There is a known bug that can happen if you installed VSCode with Nix, which can prevent the command server and command\nclient from seeing each other, which in turn breaks many commands and\n",(0,a.jsx)(e.a,{href:"https://github.com/cursorless-dev/cursorless",children:"cursorless"}),". There is a solution to this, which is to apply code from two\npull requests, one for the ",(0,a.jsx)(e.a,{href:"https://github.com/talonhub/community/pull/1362",children:"command client"})," in your community repo/fork\nand one for the ",(0,a.jsx)(e.a,{href:"https://github.com/pokey/command-server/pull/21",children:"command server"})," VSCode extension. Unfortunately, this\nwill mean having to build your own command server extension, but fortunately you can use the nix flake from ",(0,a.jsx)(e.a,{href:"https://github.com/pokey/command-server/pull/22",children:"another\ncommand server PR"})," to easily build. You can follow the instructions\n",(0,a.jsx)(e.a,{href:"https://github.com/talonhub/community/pull/1362#issuecomment-2101694031",children:"here"})," and if you run into any issues feel free\nto ask for help on the ",(0,a.jsx)(e.a,{href:"https://talonvoice.slack.com/",children:"talon slack server"})," in #talon-nixos or elsewhere."]})]})}function d(s={}){const{wrapper:e}={...(0,l.R)(),...s.components};return e?(0,a.jsx)(e,{...s,children:(0,a.jsx)(h,{...s})}):h(s)}},8453:(s,e,n)=>{n.d(e,{R:()=>r,x:()=>o});var i=n(6540);const a={},l=i.createContext(a);function r(s){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function o(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(a):s.components||a:r(s.components),i.createElement(l.Provider,{value:e},s.children)}}}]);